<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faith & Intention Journal v4</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { --p-blue: #BFD8EB; --p-lilac: #D9C1EB; --blush: #F6D1D1; --cream: #FFF5E1; }
        body { font-family: 'Lato', sans-serif; background-color: var(--cream); color: #4A4A4A; }
        .serif { font-family: 'Playfair Display', serif; }
        .watercolor-bg { filter: blur(80px); opacity: 0.2; z-index: -1; position: fixed; border-radius: 50%; }
        
        /* Sliders Styles */
        input[type=range] { -webkit-appearance: none; background: #e2e8f0; height: 8px; border-radius: 5px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 18px; width: 18px; border-radius: 50%; background: #9f7aea; cursor: pointer; }
        
        /* Sticker Animation */
        .sticker-selected { border: 2px solid #9f7aea; transform: scale(1.2); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .life-bar { transition: width 0.5s ease-in-out; }
    </style>
</head>
<body class="min-h-screen flex flex-col md:flex-row overflow-hidden">

    <div class="w-96 h-96 bg-blue-200 top-0 right-0 watercolor-bg"></div>
    <div class="w-96 h-96 bg-purple-200 bottom-0 left-0 watercolor-bg"></div>

    <nav class="w-full md:w-80 bg-white/80 backdrop-blur-md border-r p-6 flex flex-col z-10 overflow-y-auto">
        <div class="mb-10 text-center">
            <h1 class="serif text-2xl font-bold text-indigo-950">Intention 2026</h1>
            <p id="current-quarter-label" class="text-[10px] tracking-widest text-gray-400 font-bold uppercase"></p>
        </div>
        <ul class="space-y-2 flex-1 text-sm">
            <li><button onclick="showPage('cover')" class="w-full text-left p-3 rounded-xl hover:bg-white flex items-center gap-3"><i data-lucide="book-open" size="18"></i> Couverture</button></li>
            <li><button onclick="showPage('q-focus')" class="w-full text-left p-3 rounded-xl hover:bg-white flex items-center gap-3"><i data-lucide="target" size="18"></i> Focus Trimestriel</button></li>
            <li><button onclick="showPage('monthly')" class="w-full text-left p-3 rounded-xl hover:bg-white flex items-center gap-3"><i data-lucide="calendar" size="18"></i> Tracker Mensuel</button></li>
            <li><button onclick="showPage('weekly')" class="w-full text-left p-3 rounded-xl hover:bg-white flex items-center gap-3"><i data-lucide="list-checks" size="18"></i> Rituels Hebdo</button></li>
            <li><button onclick="showPage('daily')" class="w-full text-left p-3 rounded-xl hover:bg-white flex items-center gap-3 bg-white shadow-sm font-bold text-indigo-600"><i data-lucide="sun" size="18"></i> Daily Tracker</button></li>
            <li><button onclick="showPage('emotional')" class="w-full text-left p-3 rounded-xl hover:bg-white flex items-center gap-3"><i data-lucide="heart" size="18"></i> Emotional Success</button></li>
        </ul>
    </nav>

    <main class="flex-1 p-4 md:p-10 overflow-y-auto">
        <div id="content-container" class="max-w-4xl mx-auto bg-white/50 backdrop-blur-sm shadow-2xl rounded-[3rem] p-8 md:p-12 min-h-[85vh] border border-white relative">
            </div>
    </main>

    <script>
        // Data & Logic
        let state = JSON.parse(localStorage.getItem('faithJournal_v4')) || {
            rituals: { Mon: [], Tue: [], Wed: [], Thu: [], Fri: [], Sat: [], Sun: [] },
            monthlyChecks: [false, false, false, false],
            dailyLevels: { Energy: 50, Movement: 50, Prayer: 50, Connection: 50 }
        };

        let selectedSticker = null;

        const getQuarterInfo = () => {
            const month = new Date().getMonth(); // 0-11
            if (month <= 2) return { name: "Q1 2026", months: ["Janvier", "FÃ©vrier", "Mars"], colors: ["#BFD8EB", "#D9C1EB", "#F6D1D1"] };
            if (month <= 5) return { name: "Q2 2026", months: ["Avril", "Mai", "Juin"], colors: ["#C6F6D5", "#FEEBC8", "#FED7D7"] };
            return { name: "Focus 2026", months: ["Mois 1", "Mois 2", "Mois 3"], colors: ["#E2E8F0", "#E2E8F0", "#E2E8F0"] };
        };

        const pages = {
            cover: `<div class="text-center py-24"><i data-lucide="moon" class="mx-auto mb-8 text-indigo-200" size="64"></i><h1 class="serif text-6xl font-bold mb-4">Faith & Intention</h1><p class="text-2xl text-gray-400 italic font-light">By NancieDee</p></div>`,

            'q-focus': () => {
                const q = getQuarterInfo();
                return `<h2 class="serif text-3xl text-center mb-10">${q.name} Focus</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    ${q.months.map((m, i) => `
                        <div class="p-6 rounded-[2rem] border border-white shadow-lg" style="background-color: ${q.colors[i]}66">
                            <h3 class="serif text-xl mb-4">${m}</h3>
                            <textarea class="w-full h-40 bg-transparent border-none focus:ring-0 text-sm" placeholder="Mes objectifs..."></textarea>
                        </div>
                    `).join('')}
                </div>`;
            },

            monthly: () => {
                const count = state.monthlyChecks.filter(c => c).length;
                const percent = (count / 4) * 100;
                return `
                <h2 class="serif text-3xl text-center mb-2">Monthly Tracker</h2>
                <div class="max-w-md mx-auto mb-10">
                    <p class="text-xs font-bold text-gray-400 uppercase text-center mb-2">Life Balance Score</p>
                    <div class="w-full h-4 bg-gray-100 rounded-full overflow-hidden border border-white">
                        <div class="life-bar h-full bg-green-400" style="width: ${percent}%"></div>
                    </div>
                </div>
                <div class="space-y-6">
                    ${['CrÃ©ativitÃ©', 'SantÃ©', 'Famille', 'Notes'].map((item, i) => `
                        <div class="flex items-center gap-6 p-6 rounded-3xl border border-white shadow-sm transition-all ${state.monthlyChecks[i] ? 'bg-green-50/50 border-green-200' : 'bg-white/40'}">
                            <input type="checkbox" onchange="updateMonthly(${i})" ${state.monthlyChecks[i] ? 'checked' : ''} class="w-6 h-6 rounded-full border-gray-300">
                            <div class="flex-1">
                                <label class="text-xs font-bold text-gray-400 uppercase">${item}</label>
                                <input type="text" class="w-full bg-transparent border-none p-0 text-lg" placeholder="Focus pour ce mois...">
                            </div>
                        </div>
                    `).join('')}
                </div>`;
            },

            weekly: `
                <h2 class="serif text-3xl mb-10 text-center">Weekly Rituals</h2>
                <div class="space-y-2 mb-10">
                    ${['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map(day => `
                        <div class="flex items-center gap-4 py-3 border-b border-indigo-50">
                            <span class="w-12 font-bold text-gray-300 uppercase text-[10px]">${day}</span>
                            <div onclick="stampSticker('${day}')" class="flex-1 min-h-[44px] flex gap-2 items-center px-4 rounded-full bg-white/40 hover:bg-indigo-50 transition cursor-crosshair">
                                <div id="stickers-${day}" class="flex gap-2"></div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                <div class="p-6 bg-white/80 rounded-[2rem] flex justify-center gap-6 shadow-xl border border-white">
                    ${['ðŸ™', 'ðŸƒ', 'ðŸŽ¨', 'ðŸ“–', 'âœ¨', 'ðŸŒ¿'].map(s => `<button onclick="selectSticker('${s}', this)" class="sticker-opt text-4xl p-2 rounded-full transition">${s}</button>`).join('')}
                </div>`,

            daily: `
                <h2 class="serif text-3xl mb-10">Daily Tracker</h2>
                <div class="grid md:grid-cols-2 gap-12">
                    <div class="space-y-8">
                        ${['Energy', 'Movement', 'Prayer', 'Connection'].map(cat => `
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label class="font-bold text-indigo-900">${cat}</label>
                                    <span id="val-${cat}" class="text-xs font-bold text-indigo-400">50%</span>
                                </div>
                                <input type="range" class="w-full" oninput="updateLevel('${cat}', this.value)" value="${state.dailyLevels[cat] || 50}">
                            </div>
                        `).join('')}
                    </div>
                    <div class="flex flex-col">
                        <h3 class="serif text-xl mb-4">Journaling</h3>
                        <textarea class="flex-1 p-6 rounded-[2rem] bg-white border border-white shadow-inner" placeholder="Racontez votre journÃ©e..."></textarea>
                    </div>
                </div>`
        };

        function showPage(id) {
            const container = document.getElementById('content-container');
            const content = (typeof pages[id] === 'function') ? pages[id]() : pages[id];
            container.innerHTML = content;
            lucide.createIcons();
            
            if (id === 'weekly') refreshAllStickers();
            save();
        }

        // --- Interaction Logic ---
        function updateLevel(cat, val) {
            document.getElementById(`val-${cat}`).innerText = val + '%';
            state.dailyLevels[cat] = val;
            save();
        }

        function updateMonthly(index) {
            state.monthlyChecks[index] = !state.monthlyChecks[index];
            save();
            showPage('monthly'); // Refresh for bar
        }

        function selectSticker(emoji, btn) {
            selectedSticker = emoji;
            document.querySelectorAll('.sticker-opt').forEach(b => b.classList.remove('sticker-selected'));
            btn.classList.add('sticker-selected');
        }

        function stampSticker(day) {
            if (!selectedSticker) return;
            state.rituals[day].push(selectedSticker);
            save();
            refreshAllStickers();
        }

        function refreshAllStickers() {
            Object.keys(state.rituals).forEach(day => {
                const el = document.getElementById(`stickers-${day}`);
                if (el) el.innerHTML = state.rituals[day].map(s => `<span class="text-2xl">${s}</span>`).join('');
            });
        }

        function save() {
            localStorage.setItem('faithJournal_v4', JSON.stringify(state));
        }

        // Init
        document.getElementById('current-quarter-label').innerText = getQuarterInfo().name;
        showPage('cover');
    </script>
</body>
</html>
