weekly: () => {
                const wkID = getWeekID(currentDay);
                const wData = state.weekly[wkID] || { Mon:[], Tue:[], Wed:[], Thu:[], Fri:[], Sat:[], Sun:[], reflection: "" };
                return `
                <h2 class="serif text-4xl text-center mb-2 text-indigo-950">Rituels Hebdo</h2>
                <p class="text-center text-indigo-400 font-black uppercase text-[10px] tracking-widest mb-10">Semaine du ${wkID}</p>
                
                <div class="grid lg:grid-cols-2 gap-10 mb-10">
                    <div class="space-y-4">
                        ${['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'].map((day, idx) => {
                            const dayKeys = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
                            const key = dayKeys[idx];
                            return `<div class="flex items-center gap-4 group">
                                <span class="w-12 text-[10px] font-black text-indigo-300 uppercase">${day}</span>
                                <div onclick="addEmoji('${key}')" class="flex-1 h-16 glass rounded-2xl border-2 border-dashed border-indigo-100 flex items-center px-4 gap-2 cursor-pointer hover:border-indigo-400 transition-all">
                                    ${(wData[key]||[]).map((s, i) => `<span onclick="remEmoji('${key}',${i});event.stopPropagation()" class="text-3xl">${s}</span>`).join('')}
                                </div>
                            </div>`;
                        }).join('')}
                    </div>
                    <div class="bg-white/40 p-8 rounded-[3rem] border border-white flex flex-col shadow-sm">
                        <label class="text-[10px] font-black uppercase tracking-widest text-indigo-400 mb-4 block italic">Bilan & Gratitude de la semaine</label>
                        <textarea oninput="updateWeeklyRef('${wkID}', this.value)" class="flex-1 w-full bg-transparent border-none focus:ring-0 text-gray-700 leading-relaxed italic" placeholder="Qu'est-ce qui a bien fonctionnÃ© ?">${wData.reflection || ''}</textarea>
                    </div>
                </div>
                <div class="glass p-6 rounded-[2.5rem] flex justify-center gap-6 no-print shadow-inner">
                    ${['ðŸ™', 'ðŸƒ', 'ðŸŽ¨', 'ðŸ“–', 'âœ¨', 'ðŸŒ¿', 'ðŸŽ', 'ðŸ§˜'].map(s => `<button onclick="pickEmoji('${s}', this)" class="emoji-btn text-4xl p-2 rounded-xl hover:bg-white transition-all hover:shadow-md">${s}</button>`).join('')}
                </div>`;
            },
